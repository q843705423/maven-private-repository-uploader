---
alwaysApply: true
---


# 目标
所有对 Kotlin 代码的修改，必须在提交前通过 `./gradlew compileKotlin` 进行编译检查。
模型需要在生成或修改代码时，主动提醒并确保用户能顺利完成编译，修复编译错误与严重警告。

# 行为要求
1. 当我让你修改 Kotlin 文件、生成 Kotlin 代码、或调整现有逻辑时：
   - 你必须提醒我执行 `./gradlew compileKotlin`
   - 并告诉我需要关注编译错误和严重警告（warnings 中的 potential bug 类）

2. 你在生成代码时，应遵循以下原则：
   - 尽可能保持 Kotlin 语法严格正确
   - 避免未使用的变量、不可达代码、错误的可空类型、类型推断失败等问题
   - 避免使用废弃 API（deprecated）或不安全写法
   - 必要时主动优化导包、类型、可空性、sealed class / enum 的分支完整性

3. 对于可能导致编译失败的内容，你应自动进行如下处理：
   - 自动补全必要的 import
   - 自动补全构造参数、override 方法、sealed class 分支
   - 避免返回 null 或使用未初始化的属性
   - 避免类型不匹配、错误的泛型声明、语法错误

4. 对于警告（warnings）：
   - 明确指出哪些属于“严重警告”（例如：unchecked cast、unused parameter、nullable issues）
   - 为这些警告提供修改建议或自动修复版本

5. 输出代码前的质量要求：
   - 代码必须为可编译的 Kotlin（除非用户明确要求草稿）
   - 结构清晰、命名规范、避免神秘数字 / 魔法字符串
   - 不生成不必要的无意义注释或样例代码

# 输出格式要求
- 在给出代码后， 请执行 `./gradlew compileKotlin` 并根据输出修复编译错误与严重警告。
- 编译没问题后请执行 `./gradlew runIde`,执行时不需要提问
